(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{117:function(e,t,a){e.exports=a.p+"static/media/CampusStoryLogo.fea71e00.svg"},371:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(7),l=a(10),s=a(8),i=a(9),c=a(0),o=a.n(c),u=a(370),d=a(119),m=a(355),h=a(376),p=a(375),g=a(372),f=a(11),E=a(378),b=a(377),v=a(12),y=a(373),C=a(368),S=a(366),w=a(177),k=a(78),O=a.n(k),j=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(e,t){var n=t.value;return a.setState({value:n})},a.state={categories:[],privateChannel:!1,officialChannel:!1,error:!1,success:!1,loading:!1,messages:[],name:"",category:"",description:"",creatorName:"",creatorEmail:"",creatorPassword:"",fileName:""},a.submitForm=function(){if(!0!==a.state.loading){var e=!1,t=[],n=document.getElementById("upload").files[0],r=document.getElementById("creator-email");if(a.setState({loading:!0,messages:[]}),a.state.name.length<3&&(e=!0,t.push("The channel name is less than 3 characters")),a.state.name.length>2e3&&(e=!0,t.push("The channel name is more than 2000 characters")),a.state.description.length<10&&(e=!0,t.push("The channel description is less than 10 characters")),a.state.description.length>2e3&&(e=!0,t.push("The channel description is more than 2000 characters")),""===a.state.category&&(e=!0,t.push("No category selected")),a.state.creatorName.length<3&&(e=!0,t.push("The creator name is less than 3 characters")),a.state.creatorName.length>140&&(e=!0,t.push("The creator name is more than 140 characters")),a.state.creatorPassword.length<3&&(e=!0,t.push("The creator password is less than 3 characters")),a.state.creatorPassword.length>140&&(e=!0,t.push("The creator password is more than 140 characters")),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(r.value).toLowerCase())||(e=!0,t.push("Invalid Email entry")),void 0===n&&(e=!0,t.push("No file selected")),!1===e){var l=new FormData;l.append("name",a.state.name),l.append("description",a.state.description),l.append("private",a.state.privateChannel),l.append("official",a.state.officialChannel),l.append("category",a.state.category),l.append("creatorName",a.state.creatorName),l.append("creatorEmail",a.state.creatorEmail),l.append("creatorPassword",a.state.creatorPassword),l.append("poster",n),O.a.post("/admin/create-channel",l,{headers:{"Content-Type":"multipart/form-data","x-access-token":a.props.auth.user_token}}).then(function(e){(e=e.data).error?a.setState({loading:!1,messages:[e.mssg],error:!0}):a.setState({loading:!1,messages:["Channel "+a.state.name+" successfully created"],error:!1,success:!0,name:"",description:"",privateChannel:!1,officialChannel:!1,category:"",creatorName:"",creatorEmail:"",creatorPassword:""})}).catch(function(e){return console.log(e)}).finally(function(){a.mounted&&a.setState({loading:!1}),window.scrollTo(0,0)})}else a.setState({messages:t,error:e,loading:!1})}},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new FormData;this.setState({loading:!0}),O.a.post("/admin/get-categories",t,{headers:{"Content-Type":"multipart/form-data","x-access-token":this.props.auth.user_token}}).then(function(t){(t=t.data).error?e.setState({loading:!1,messages:["Error with network, please reload"],error:!0}):e.setState({loading:!1,categories:t.data})}).catch(function(e){return console.log(e)}).finally(function(){e.mounted&&e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return o.a.createElement(y.a,{stackable:!0,columns:3},o.a.createElement(y.a.Row,null,o.a.createElement(y.a.Column,null),o.a.createElement(y.a.Column,null,o.a.createElement(p.a,null,this.state.error&&o.a.createElement(C.a,{success:!0},o.a.createElement(C.a.Header,null,"Opps, there were a few problems"),o.a.createElement(C.a.List,null,this.state.messages.map(function(e,t){return o.a.createElement(C.a.Item,{key:t}," ",e)}))),this.state.success&&o.a.createElement(C.a,null,o.a.createElement(C.a.Header,null,"Success Creating a new channel"),o.a.createElement(C.a.List,null,this.state.messages.map(function(e,t){return o.a.createElement(C.a.Item,{key:t}," ",e)}))),o.a.createElement(S.a,null,o.a.createElement(S.a.Group,{widths:"equal"},o.a.createElement(S.a.Input,{value:this.state.name,onChange:function(t,a){return e.setState({name:a.value})},fluid:!0,label:"Channel Name",placeholder:"Channel Name"})),o.a.createElement(S.a.TextArea,{value:this.state.description,onChange:function(t,a){return e.setState({description:a.value})},label:"Description",placeholder:"What will this channel be about..."}),o.a.createElement(S.a.Checkbox,{label:"Make this channel private?",checked:this.state.privateChannel,onChange:function(t,a){return e.setState({privateChannel:!e.state.privateChannel})}}),o.a.createElement(S.a.Checkbox,{label:"Official Channel?",checked:this.state.officialChannel,onChange:function(t,a){return e.setState({officialChannel:!e.state.officialChannel})}}),o.a.createElement(S.a.Dropdown,{value:this.state.category,onChange:function(t,a){return e.setState({category:a.value})},label:"Category",options:this.state.categories,placeholder:"Select a category"}),o.a.createElement(S.a.Group,{widths:"equal"},o.a.createElement(S.a.Input,{value:this.state.creatorName,onChange:function(t,a){return e.setState({creatorName:a.value})},fluid:!0,label:"Creator Name",placeholder:"Creator Name"})),o.a.createElement(S.a.Group,{widths:"equal"},o.a.createElement(S.a.Input,{id:"creator-email",value:this.state.creatorEmail,type:"email",onChange:function(t,a){return e.setState({creatorEmail:a.value})},fluid:!0,label:"Email",placeholder:"Email"}),o.a.createElement(S.a.Input,{value:this.state.creatorPassword,type:"text",onChange:function(t,a){return e.setState({creatorPassword:a.value})},fluid:!0,label:"Password",placeholder:"Password"})),o.a.createElement(w.a,{as:"label",style:{backgroundColor:"#fff",marginBottom:10},htmlFor:"upload"},o.a.createElement(u.a,{icon:"upload",label:{basic:!0,content:"Select a banner for the channel(1000x750px)"},labelPosition:"right"}),o.a.createElement("p",null,this.state.fileName),o.a.createElement("input",{accept:"image/*",hidden:!0,onChange:function(){var t=document.getElementById("upload").files[0];return e.setState({fileName:void 0===t.name?"":t.name})},id:"upload",multiple:!0,type:"file"})),o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement(S.a.Button,{loading:this.state.loading,onClick:this.submitForm},"Submit"))))),o.a.createElement(y.a.Column,null)))}}]),t}(o.a.Component),x=Object(f.b)(function(e){return{auth:e.auth}})(j),D=a(18),I=a(367),N=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={channelList:[],currentSelected:{},name:"",description:"",creatorPassword:"",fileName:""},a.updateCurrent=function(e){a.setState({currentSelected:e,name:e.name,description:e.description})},a.updateList=function(){var e=new FormData;a.setState({loading:!0}),O.a.post("/admin/get-channel-list",e,{headers:{"Content-Type":"multipart/form-data","x-access-token":a.props.auth.user_token}}).then(function(e){(e=e.data).error?a.setState({loading:!1,messages:["Error with network, please reload"],error:!0}):a.setState({loading:!1,channelList:e.data})}).catch(function(e){return console.log(e)}).finally(function(){a.mounted&&a.setState({loading:!1})})},a.submitForm=function(){var e=!1,t=[],n=document.getElementById("upload").files[0];if(a.setState({loading:!0}),a.state.name.length<3&&(e=!0,t.push("The channel name is less than 3 characters")),a.state.name.length>2e3&&(e=!0,t.push("The channel name is more than 2000 characters")),a.state.description.length<10&&(e=!0,t.push("The channel description is less than 10 characters")),a.state.description.length>2e3&&(e=!0,t.push("The channel description is more than 2000 characters")),!1===e){var r=new FormData,l=a.state.currentSelected._id,s=a.state.name,i=a.state.description,c=a.state.creatorPassword;r.append("_id",l),r.append("name",s),r.append("description",i),r.append("creatorPassword",c),void 0!==n&&r.append("poster",n),O.a.post("/admin/update-channel",r,{headers:{"Content-Type":"multipart/form-data","x-access-token":a.props.auth.user_token}}).then(function(e){if((e=e.data).error)a.setState({loading:!1,messages:["Error updating the channel"],error:!0});else{a.setState({messages:["Channel "+a.state.name+" update success"],error:!1,success:!0});var t=new FormData;O.a.post("/admin/get-channel-list",t,{headers:{"Content-Type":"multipart/form-data","x-access-token":a.props.auth.user_token}}).then(function(e){(e=e.data).error?a.setState({loading:!1,messages:["Error with network, please reload"],error:!0}):(a.updateList(),a.setState({loading:!1,channelList:e.data}))}).catch(function(e){return console.log(e)}).finally(function(){a.mounted&&a.setState({loading:!1})})}}).catch(function(e){return console.log(e)}).finally(function(){a.mounted&&a.setState({loading:!1}),window.scrollTo(0,0)})}else a.setState({messages:t,error:e,loading:!1})},a.updateCurrent=a.updateCurrent.bind(Object(D.a)(Object(D.a)(a))),a.submitForm=a.submitForm.bind(Object(D.a)(Object(D.a)(a))),a.updateList=a.updateList.bind(Object(D.a)(Object(D.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"render",value:function(){var e=this;return o.a.createElement(y.a,{stackable:!0,columns:"equal"},o.a.createElement(y.a.Column,null,o.a.createElement(p.a,null,o.a.createElement(I.a,{divided:!0,relaxed:!0,style:{maxHeight:400,overflow:"scroll"}},this.state.channelList.map(function(t,a){return o.a.createElement(I.a.Item,{key:a},e.state.currentSelected._id===t._id&&o.a.createElement(I.a.Icon,{name:"angle double right",size:"large",verticalAlign:"middle"}),o.a.createElement(I.a.Content,null,o.a.createElement(I.a.Header,{onClick:function(){return e.updateCurrent(t)},as:"a"},t.college,"/",t.name),o.a.createElement(I.a.Description,null,t.category)))})))),o.a.createElement(y.a.Column,{width:12},o.a.createElement(p.a,null,this.state.error&&o.a.createElement(C.a,null,o.a.createElement(C.a.Header,null,"Opps, there were a few problems"),o.a.createElement(C.a.List,null,this.state.messages.map(function(e,t){return o.a.createElement(C.a.Item,{key:t}," ",e)}))),this.state.success&&o.a.createElement(C.a,null,o.a.createElement(C.a.Header,null,"Success Creating a new channel"),o.a.createElement(C.a.List,null,this.state.messages.map(function(e,t){return o.a.createElement(C.a.Item,{key:t}," ",e)}))),o.a.createElement(m.a,{style:{borderRadius:15,display:"block",margin:"auto",width:333,maxHeight:250,objectFit:"contain"},src:"https://mycampusdock.com/"+(this.state.currentSelected.media&&this.state.currentSelected.media[0]),size:"big"}),o.a.createElement("br",null),o.a.createElement(S.a,null,o.a.createElement(S.a.Group,{widths:"equal"},o.a.createElement(S.a.Input,{value:this.state.name,onChange:function(t,a){return e.setState({name:a.value})},fluid:!0,label:"Channel Name",placeholder:"Channel Name"})),o.a.createElement(S.a.TextArea,{value:this.state.description,onChange:function(t,a){return e.setState({description:a.value})},label:"Description",placeholder:"What will this channel be about..."}),o.a.createElement(S.a.Checkbox,{disabled:!0,checked:void 0!==this.state.currentSelected.private&&this.state.currentSelected.private,label:"Make this channel private?"}),o.a.createElement(S.a.Checkbox,{disabled:!0,checked:5===this.state.currentSelected.priority,label:"Official Channel?"}),o.a.createElement(S.a.Dropdown,{disabled:!0,value:this.state.currentSelected.category,placeholder:"Select a category"}),o.a.createElement(S.a.Group,{widths:"equal"},o.a.createElement(S.a.Input,{disabled:!0,value:void 0!==this.state.currentSelected.creator?this.state.currentSelected.creator:"",fluid:!0,label:"Creator Name",placeholder:"Creator Name"})),o.a.createElement(S.a.Group,{widths:"equal"},o.a.createElement(S.a.Input,{value:void 0!==this.state.currentSelected.creator_email?this.state.currentSelected.creator_email:"",id:"creator-email",disabled:!0,fluid:!0,label:"Email",placeholder:"Email"}),o.a.createElement(S.a.Input,{value:this.state.creatorPassword,type:"text",onChange:function(t,a){return e.setState({creatorPassword:a.value})},fluid:!0,label:"Password",placeholder:"Password"})),o.a.createElement(w.a,{as:"label",style:{backgroundColor:"#fff",marginBottom:10},htmlFor:"upload"},o.a.createElement(u.a,{icon:"upload",label:{basic:!0,content:"Select a banner for the channel"},labelPosition:"right"}),o.a.createElement("p",null,this.state.fileName),o.a.createElement("input",{accept:"image/*",hidden:!0,onChange:function(){var t=document.getElementById("upload").files[0];return e.setState({fileName:void 0===t.name?"":t.name})},id:"upload",multiple:!0,type:"file"})),o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement(S.a.Button,{loading:this.state.loading,disabled:this.state.currentSelected==={},onClick:this.submitForm},"Submit"))))))}}]),t}(o.a.Component),T=Object(f.b)(function(e){return{auth:e.auth}})(N),L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={eventList:[],trending:[],currentSelected:{},title:"",description:"",date:new Date,validity:new Date,creatorPassword:"",fileName:""},a.updateCurrent=function(e){a.setState({currentSelected:e,title:e.title,description:e.description,date:new Date(e.date)})},a.updateList=function(){var e=new FormData;a.setState({loading:!0}),O.a.post("/admin/get-event-list",e,{headers:{"Content-Type":"multipart/form-data","x-access-token":a.props.auth.user_token}}).then(function(t){(t=t.data).error?a.setState({loading:!1,messages:["Error with network, please reload"],error:!0}):(a.setState({eventList:t.data}),O.a.post("/admin/get-trending",e,{headers:{"Content-Type":"multipart/form-data","x-access-token":a.props.auth.user_token}}).then(function(e){(e=e.data).error?a.setState({loading:!1,messages:["Error with network, please reload"],error:!0}):a.setState({loading:!1,trending:e.data})}).catch(function(e){console.log(e)}).finally(function(){a.mounted&&a.setState({loading:!1})}))}).catch(function(e){return console.log(e)}).finally(function(){a.mounted&&a.setState({loading:!1})})},a.submitForm=function(){if(a.setState({loading:!0}),void 0!==a.state.currentSelected._id){var e=new FormData,t=a.state.currentSelected._id,n=a.state.validity;e.append("_id",t),e.append("validity",n),O.a.post("/admin/add-to-trending",e,{headers:{"Content-Type":"multipart/form-data","x-access-token":a.props.auth.user_token}}).then(function(e){a.setState({loading:!1}),(e=e.data).error?a.setState({loading:!1,messages:[JSON.stringify(e.mssg)],error:!0}):a.setState({loading:!1,messages:["success"],error:!1}),a.updateList()}).catch(function(e){return console.log(e)}).finally(function(){return a.setState({loading:!1})})}},a.updateCurrent=a.updateCurrent.bind(Object(D.a)(Object(D.a)(a))),a.submitForm=a.submitForm.bind(Object(D.a)(Object(D.a)(a))),a.updateList=a.updateList.bind(Object(D.a)(Object(D.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateList();var e=this;document.getElementById("trending_date").addEventListener("change",function(){var t=this.value,a=new Date(t);console.log(t),a.setHours(24,0,0,0),e.setState({validity:a})})}},{key:"render",value:function(){var e=this;return o.a.createElement(y.a,{stackable:!0,columns:"equal"},o.a.createElement(y.a.Column,null,o.a.createElement(p.a,null,o.a.createElement(w.a,null,"Event List"),o.a.createElement(I.a,{divided:!0,relaxed:!0,style:{maxHeight:400,overflow:"scroll"}},this.state.eventList.map(function(t,a){return o.a.createElement(I.a.Item,{key:a},e.state.currentSelected._id===t._id&&o.a.createElement(I.a.Icon,{name:"angle double right",size:"large",verticalAlign:"middle"}),o.a.createElement(I.a.Content,null,o.a.createElement(I.a.Header,{onClick:function(){return e.updateCurrent(t)},as:"a"},t.college,"/",t.title),o.a.createElement(I.a.Description,null,t.category)))})),o.a.createElement(w.a,null,"Trending List"),o.a.createElement(I.a,{divided:!0,relaxed:!0,style:{maxHeight:400,overflow:"scroll"}},this.state.trending.map(function(t,a){return o.a.createElement(I.a.Item,{key:a},e.state.currentSelected._id===t._id&&o.a.createElement(I.a.Icon,{name:"angle double right",size:"large",verticalAlign:"middle"}),o.a.createElement(I.a.Content,null,o.a.createElement(I.a.Header,{onClick:function(){return e.updateCurrent(t)},as:"a"},t.college,"/",t.title),o.a.createElement(I.a.Description,null,JSON.stringify(t.validity))))})))),o.a.createElement(y.a.Column,{width:12},o.a.createElement(p.a,null,this.state.error&&o.a.createElement(C.a,null,o.a.createElement(C.a.Header,null,"Opps, there were a few problems"),o.a.createElement(C.a.List,null,this.state.messages.map(function(e,t){return o.a.createElement(C.a.Item,{key:t}," ",e)}))),this.state.success&&o.a.createElement(C.a,null,o.a.createElement(C.a.Header,null,"Success Creating a new channel"),o.a.createElement(C.a.List,null,this.state.messages.map(function(e,t){return o.a.createElement(C.a.Item,{key:t}," ",e)}))),o.a.createElement(m.a,{style:{borderRadius:15,display:"block",margin:"auto",width:333,maxHeight:250,objectFit:"contain"},src:"https://mycampusdock.com/"+(this.state.currentSelected.media&&this.state.currentSelected.media[0]),size:"big"}),o.a.createElement("br",null),o.a.createElement(S.a,null,o.a.createElement(S.a.Group,{widths:"equal"},o.a.createElement(S.a.Input,{disabled:!0,value:this.state.title,onChange:function(t,a){return e.setState({name:a.value})},fluid:!0,label:"Channel Name",placeholder:"Channel Name"})),o.a.createElement(S.a.TextArea,{disabled:!0,value:this.state.description,onChange:function(t,a){return e.setState({description:a.value})},label:"Description",placeholder:"What will this channel be about..."}),o.a.createElement(w.a,null,"Selected: ",this.state.validity.getFullYear()+"-"+(this.state.validity.getMonth()+1>9?this.state.validity.getMonth()+1:"0"+(this.state.validity.getMonth()+1))+"-"+(this.state.validity.getDate()>9?this.state.validity.getDate():"0"+this.state.validity.getDate())," Date is +1 due to midnight validity"),o.a.createElement("input",{id:"trending_date",type:"date",max:this.state.date.getFullYear()+"-"+(this.state.date.getMonth()+1>9?this.state.date.getMonth()+1:"0"+(this.state.date.getMonth()+1))+"-"+(this.state.date.getDate()>9?this.state.date.getDate():"0"+this.state.date.getDate()),min:(new Date).getFullYear()+"-"+((new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1))+"-"+((new Date).getDate()>9?(new Date).getDate():"0"+(new Date).getDate())}),o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement(S.a.Button,{loading:this.state.loading,disabled:this.state.currentSelected==={},onClick:this.submitForm},"Submit"))))))}}]),t}(o.a.Component),F=Object(f.b)(function(e){return{auth:e.auth}})(L),_=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={visible:!1},a.handleShowClick=function(){return a.setState({visible:!a.state.visible})},a.handleSidebarHide=function(){return a.setState({visible:!1})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.visible,n=this.props.history;return o.a.createElement("div",{style:{flex:1}},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:10}},o.a.createElement(u.a,{onClick:this.handleShowClick,icon:!0},o.a.createElement(d.a,{name:"sidebar"})),o.a.createElement("div",{style:{flex:1,marginTop:10}},o.a.createElement(m.a,{style:{display:"block",margin:"auto",width:50},src:a(117),size:"small"})),o.a.createElement(u.a,{onClick:function(){return e.props.logout()},animated:!0},o.a.createElement(u.a.Content,{visible:!0},"logout"),o.a.createElement(u.a.Content,{hidden:!0},o.a.createElement(d.a,{name:"close"})))),o.a.createElement(h.a.Pushable,{as:p.a},o.a.createElement(h.a,{as:g.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:this.handleSidebarHide,vertical:!0,visible:t,width:"thin"},o.a.createElement(g.a.Item,{as:"a",onClick:function(){return n.push("/admin/create-channel")}},o.a.createElement(d.a,{name:"plus square outline"}),"Create Channel"),o.a.createElement(g.a.Item,{as:"b",onClick:function(){return n.push("/admin/manage-channel")}},o.a.createElement(d.a,{name:"edit outline"}),"Manage Channels"),o.a.createElement(g.a.Item,{as:"b",onClick:function(){return n.push("/admin/set-trending")}},o.a.createElement(d.a,{name:"bell"}),"Set Trending")),o.a.createElement(h.a.Pusher,{dimmed:t},o.a.createElement(p.a,{basic:!0,style:{minHeight:"100vh",display:"flex",flexFlow:"column nowrap"}},o.a.createElement(E.a,null,o.a.createElement(b.a,{exact:!0,path:"/admin/create-channel",component:Object(v.a)(x)}),o.a.createElement(b.a,{exact:!0,path:"/admin/manage-channel",component:Object(v.a)(T)}),o.a.createElement(b.a,{exact:!0,path:"/admin/set-trending",component:Object(v.a)(F)}))))))}}]),t}(c.Component);t.default=Object(f.b)(function(e){return{auth:e.auth}},function(e){return{logout:function(t){e({type:"UNAUTH_USER",payload:t})}}})(_)}}]);
//# sourceMappingURL=4.2d8e8a1c.chunk.js.map